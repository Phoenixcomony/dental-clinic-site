<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ | Ù…Ø¬Ù…Ø¹ ÙÙŠÙ†ÙƒØ³ Ø§Ù„Ø·Ø¨ÙŠ</title>
  <meta name="description" content="Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©/Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© ÙˆØ§Ù„Ø¬ÙˆØ§Ù„ Ù…Ø¹ ØªØ­Ù‚Ù‚ ÙˆØ§ØªØ³Ø§Ø¨ØŒ Ø«Ù… Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ.">

  <!-- Ù…Ù„ÙÙƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (ÙŠØ¨Ù‚Ù‰) -->
  <link rel="stylesheet" href="css/style.css" />

  <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Ø®Ø· -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-0:#0b0f14;
      --bg-1:#0f172a;
      --card: rgba(255,255,255,.86);
      --card2: rgba(255,255,255,.72);
      --stroke: rgba(226,190,109,.28);

      --gold:#e2be6d;
      --gold2:#f2d792;
      --gold3:#fff6df;

      --green:#2e7d32;
      --green2:#1b5e20;

      --text:#0f172a;
      --muted:#6b7280;

      --shadow: 0 18px 60px rgba(15,23,42,.14);
      --shadow2: 0 10px 30px rgba(15,23,42,.10);
      --r-xl: 26px;
      --r-lg: 18px;
      --r-md: 14px;
      --r-pill: 999px;

      --ring: 0 0 0 4px rgba(226,190,109,.25);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family:'Cairo', system-ui, -apple-system, "Segoe UI", Tahoma, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 600px at 15% 0%, rgba(226,190,109,.22), transparent 60%),
                  radial-gradient(900px 500px at 90% 10%, rgba(46,125,50,.16), transparent 60%),
                  radial-gradient(900px 500px at 55% 100%, rgba(99,102,241,.10), transparent 60%),
                  #f4f5f7;
      overflow-x:hidden;
    }

    /* Ø®Ù„ÙÙŠØ© Ø¨Ù„ÙˆØ± ÙØ®Ù…Ø© */
    .lux-bg{
      position: fixed;
      inset: 0;
      background:
        linear-gradient(180deg, rgba(255,255,255,.35), rgba(255,255,255,.90)),
        url('images/Ø­Ø¬Ø² Ø§Ù„Ù…ÙˆØ¹Ø¯.png') center/cover no-repeat;
      filter: blur(18px) saturate(1.05);
      opacity: .95;
      z-index: 0;
      pointer-events:none;
      transform: scale(1.05);
    }
    body > *:not(.lux-bg){ position:relative; z-index:1; }

    /* Ù‡ÙŠØ¯Ø± Ø²Ø¬Ø§Ø¬ÙŠ */
    header{
      position: sticky;
      top: 0;
      z-index: 10;
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(226,190,109,.25);
      box-shadow: 0 10px 30px rgba(15,23,42,.06);
    }
    .header-inner{
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      min-width: 160px;
    }
    .brand img{
      height:44px;
      width:auto;
      object-fit:contain;
      filter: drop-shadow(0 10px 20px rgba(226,190,109,.25));
    }

    nav ul{
      list-style:none;
      display:flex;
      gap:10px;
      margin:0;
      padding:0;
      flex-wrap:wrap;
      justify-content:center;
      align-items:center;
    }
    nav ul li a{
      display:inline-flex;
      align-items:center;
      gap:8px;
      text-decoration:none;
      color:#111827;
      font-weight:800;
      padding: 8px 14px;
      border-radius: var(--r-pill);
      border: 1px solid transparent;
      background: transparent;
      transition: .18s ease;
      white-space:nowrap;
    }
    nav ul li a:hover{
      background: rgba(226,190,109,.16);
      border-color: rgba(226,190,109,.26);
      transform: translateY(-1px);
    }
    nav ul li a.active{
      background: linear-gradient(135deg, rgba(226,190,109,.26), rgba(255,246,223,.75));
      border-color: rgba(226,190,109,.35);
      box-shadow: 0 12px 24px rgba(226,190,109,.18);
      color:#7a5708;
    }

    .social-icons{
      display:flex;
      gap:8px;
      align-items:center;
      margin-inline-start: 8px;
    }
    .social-icon{
      width:34px; height:34px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius:50%;
      background: rgba(255,246,223,.9);
      border: 1px solid rgba(226,190,109,.35);
      color:#7a5708;
      box-shadow: 0 10px 20px rgba(226,190,109,.12);
      transition:.18s ease;
      text-decoration:none;
    }
    .social-icon:hover{
      transform: translateY(-1px);
      background: rgba(226,190,109,.18);
    }

    /* Ù„ÙˆØ¯Ø± */
    .screen-loader{
      position: fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(255,255,255,.55);
      backdrop-filter: blur(6px);
      z-index: 9999;
    }
    .screen-loader.show{ display:flex; }
    .spinner{
      width: 74px;
      height: 74px;
      border-radius: 50%;
      border: 4px solid rgba(226,190,109,.35);
      border-top-color: var(--gold);
      animation: spin .85s linear infinite;
      box-shadow: 0 18px 50px rgba(226,190,109,.28);
      background: rgba(255,255,255,.55);
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }

    /* Ø§Ù„ØµÙØ­Ø© */
    .page{
      max-width: 980px;
      margin: 18px auto 28px;
      padding: 0 14px;
    }

    .hero-strip{
      margin-top: 14px;
      border-radius: var(--r-xl);
      padding: 16px 16px 14px;
      background: linear-gradient(135deg, rgba(255,255,255,.80), rgba(255,246,223,.70));
      border: 1px solid rgba(226,190,109,.30);
      box-shadow: var(--shadow2);
      overflow:hidden;
      position:relative;
    }
    .hero-strip:before{
      content:"";
      position:absolute;
      inset:-1px;
      background: radial-gradient(700px 200px at 20% 20%, rgba(226,190,109,.25), transparent 55%),
                  radial-gradient(600px 200px at 85% 80%, rgba(46,125,50,.18), transparent 55%);
      pointer-events:none;
      opacity:.9;
    }
    .hero-strip > *{ position:relative; z-index:1; }

    .hero-title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
    }
    .hero-title h1{
      margin:0;
      font-size: 1.1rem;
      font-weight: 900;
      color:#6b4b00;
      letter-spacing:.2px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .hero-title h1 i{
      width:38px;height:38px;
      border-radius: 14px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      background: rgba(226,190,109,.18);
      border: 1px solid rgba(226,190,109,.26);
      box-shadow: 0 10px 20px rgba(226,190,109,.15);
    }
    .hero-sub{
      margin: 6px 0 0;
      color:#6b7280;
      font-weight:700;
      font-size:.92rem;
    }

    /* ÙƒØ±ÙˆØª */
    .card{
      margin-top: 14px;
      border-radius: var(--r-xl);
      padding: 16px;
      background: var(--card);
      border: 1px solid rgba(226,190,109,.26);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
    }

    .card-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom: 10px;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: var(--r-pill);
      background: rgba(255,246,223,.80);
      border: 1px solid rgba(226,190,109,.26);
      font-weight:900;
      color:#6b4b00;
      font-size: .88rem;
      box-shadow: 0 10px 18px rgba(226,190,109,.10);
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media (min-width: 920px){
      .grid.two{ grid-template-columns: 1fr 1fr; }
    }

    label{
      display:block;
      margin: 0 0 6px;
      font-weight: 900;
      color:#6b4b00;
      font-size: .92rem;
    }

    .field{
      position:relative;
    }
    .field i.prefix{
      position:absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(107,75,0,.65);
      font-size: 1rem;
      pointer-events:none;
    }

    input, select, textarea{
      width:100%;
      border-radius: 16px;
      border: 1.6px solid rgba(226,190,109,.40);
      background: rgba(255,255,255,.75);
      padding: 12px 12px;
      font-size: 1rem;
      outline:none;
      transition: .16s ease;
      color:#111827;
    }
    .field.has-icon input,
    .field.has-icon select{
      padding-right: 42px;
    }
    textarea{
      min-height: 96px;
      resize: vertical;
      padding: 12px 12px;
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(226,190,109,.75);
      box-shadow: var(--ring);
      background: rgba(255,255,255,.92);
      transform: translateY(-.5px);
    }

    .muted{
      color: var(--muted);
      font-weight:700;
      font-size:.92rem;
      text-align:center;
      min-height: 22px;
      margin-top: 8px;
    }

    .note{
      border-radius: 18px;
      padding: 12px 12px;
      background: rgba(46,125,50,.08);
      border: 1px dashed rgba(46,125,50,.28);
      color: #124b18;
      font-weight:900;
      text-align:center;
      line-height:1.5;
    }

    /* Ø£Ø²Ø±Ø§Ø± */
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .row > *{ flex:1; }

    .btn{
      width:100%;
      border:none;
      border-radius: 18px;
      padding: 12px 14px;
      font-weight: 900;
      cursor:pointer;
      transition: .16s ease;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      user-select:none;
    }
    .btn:disabled{ opacity:.55; cursor:not-allowed; transform:none !important; box-shadow:none !important; }

    .btn-gold{
      color:#5b3e00;
      background: linear-gradient(135deg, rgba(226,190,109,.95), rgba(255,246,223,.92));
      border: 1px solid rgba(226,190,109,.55);
      box-shadow: 0 16px 40px rgba(226,190,109,.22);
    }
    .btn-gold:hover{ transform: translateY(-1px); box-shadow: 0 18px 48px rgba(226,190,109,.30); }

    .btn-green{
      color:#f0fff4;
      background: linear-gradient(135deg, var(--green), var(--green2));
      border: 1px solid rgba(27,94,32,.45);
      box-shadow: 0 16px 40px rgba(46,125,50,.28);
    }
    .btn-green:hover{ transform: translateY(-1px); box-shadow: 0 18px 52px rgba(46,125,50,.36); }

    .btn-ghost{
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(226,190,109,.35);
      color:#6b4b00;
      box-shadow: 0 12px 30px rgba(15,23,42,.08);
    }
    .btn-ghost:hover{ transform: translateY(-1px); background: rgba(255,246,223,.75); }

    /* Ø²Ø± Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ */
    .btn-hours{
      width:auto;
      padding: 10px 14px;
      border-radius: 16px;
      background: linear-gradient(135deg, var(--green), var(--green2));
      color:#fff;
      border:none;
      font-weight:900;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:10px;
      box-shadow: 0 14px 30px rgba(46,125,50,.28);
      transition: .16s ease;
    }
    .btn-hours:hover{ transform: translateY(-1px); box-shadow: 0 16px 40px rgba(46,125,50,.35); }

    /* Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ */
    .hours-table{
      width:100%;
      border-collapse: collapse;
      overflow:hidden;
      border-radius: 18px;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(226,190,109,.25);
      box-shadow: var(--shadow2);
    }
    .hours-table th, .hours-table td{
      border: 1px solid rgba(226,190,109,.20);
      padding: 10px;
      text-align:center;
      font-weight:800;
    }
    .hours-table th{
      background: linear-gradient(135deg, var(--green), var(--green2));
      color:#fff;
      font-weight:900;
    }

    /* ÙÙˆØªØ± */
    footer{
      margin-top: 18px;
      text-align:center;
      padding: 12px 10px;
      color:#6b4b00;
      font-weight:900;
      background: rgba(255,255,255,.55);
      border-top: 1px solid rgba(226,190,109,.25);
      box-shadow: 0 -10px 30px rgba(15,23,42,.06);
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ */
    @media (max-width: 780px){
      .header-inner{ gap:10px; }
      nav ul{ gap:6px; }
      nav ul li a{ padding: 7px 10px; font-size:.98rem; }
      .brand{ min-width: unset; }
      .brand img{ height:40px; }
      .hero-title h1{ font-size: 1.02rem; }
      .card{ padding: 14px; }
      input, select, textarea{ border-radius: 16px; }
    }

    /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„Ùˆ Ø«Ù‚ÙŠÙ„ */
    @media (max-width: 600px){
      .lux-bg{ filter: blur(14px) saturate(1.05); opacity:.90; }
    }
  </style>
</head>

<body>

  <div class="lux-bg" aria-hidden="true"></div>

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
  <div id="screenLoader" class="screen-loader" aria-live="polite" aria-busy="true">
    <div class="spinner" role="status" aria-label="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„"></div>
  </div>

  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <header>
    <div class="header-inner">
      <div class="brand">
        <img src="images/logo phoenix-Photoroom.png" alt="Ø´Ø¹Ø§Ø± Ù…Ø¬Ù…Ø¹ ÙÙŠÙ†ÙƒØ³ Ø§Ù„Ø·Ø¨ÙŠ" loading="eager" decoding="async">
      </div>

      <nav aria-label="Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ">
        <ul>
          <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
          <li><a href="about.html">Ù…Ù† Ù†Ø­Ù†</a></li>
          <li><a href="services.html">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a></li>
          <li><a href="appointment.html" class="active" aria-current="page">Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯</a></li>
          <li><a href="contact.html">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a></li>
          <li>
            <div class="social-icons">
              <a href="https://wa.me/966531422555" target="_blank" rel="noopener" title="ÙˆØ§ØªØ³Ø§Ø¨" class="social-icon" aria-label="ÙˆØ§ØªØ³Ø§Ø¨"><i class="fab fa-whatsapp"></i></a>
              <a href="https://www.instagram.com/phoenix.shq/" target="_blank" rel="noopener" title="Ø¥Ù†Ø³ØªÙ‚Ø±Ø§Ù…" class="social-icon" aria-label="Ø¥Ù†Ø³ØªÙ‚Ø±Ø§Ù…"><i class="fab fa-instagram"></i></a>
              <a href="https://www.snapchat.com/add/phoenix.shq?share_id=VOXDQhmXrWw&locale=ar-AE" target="_blank" rel="noopener" title="Ø³Ù†Ø§Ø¨ Ø´Ø§Øª" class="social-icon" aria-label="Ø³Ù†Ø§Ø¨ Ø´Ø§Øª"><i class="fab fa-snapchat-ghost"></i></a>
            </div>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="page">
    <!-- Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø© -->
    <section class="hero-strip" aria-label="Ù…Ù‚Ø¯Ù…Ø©">
      <div class="hero-title">
        <div>
          <h1><i class="fa-solid fa-sparkles"></i> Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ â€” Ù…Ø¬Ù…Ø¹ ÙÙŠÙ†ÙƒØ³ Ø§Ù„Ø·Ø¨ÙŠ</h1>
          <p class="hero-sub">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø«Ù… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© ÙˆØ§Ù„ÙˆÙ‚Øª Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©.</p>
        </div>
        <span class="chip"><i class="fa-solid fa-shield-heart"></i> </span>
      </div>
    </section>

    <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <section id="loginSection" class="card" aria-label="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„">
      <div class="card-head">
        <span class="chip"><i class="fa-solid fa-user-check"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
        
        </span>
      </div>

      <div class="grid two">
        <div>
          <label for="identity">Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© / Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</label>
          <div class="field has-icon">
            <i class="prefix fa-solid fa-id-card"></i>
            <input id="identity" type="text" placeholder="Ù…Ø«Ø§Ù„: 1234567890" inputmode="numeric" maxlength="10" autocomplete="off">
          </div>
        </div>

        <div>
          <label for="mobile">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
          <div class="field has-icon">
            <i class="prefix fa-solid fa-phone"></i>
            <input id="mobile" type="text" placeholder="05xxxxxxxx" inputmode="numeric" maxlength="10" autocomplete="tel">
          </div>
        </div>
      </div>

      <div class="note" style="margin-top:12px;">
        ğŸ”” ØªÙ†Ø¨ÙŠÙ‡: Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù„ÙŠØ²Ø± Ù…ØªØ§Ø­Ø© Ù„Ù„Ø­Ø¬Ø² Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¬Ù…Ø¹ ÙÙ‚Ø·. <br>
        Ù„Ù„ØªÙˆØ§ØµÙ„ Ø§Ø¶ØºØ· Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©.
      </div>

     
        <button id="loginBtn" class="btn btn-gold" type="button" disabled>
          <i class="fa-solid fa-arrow-right-to-bracket"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        </button>
      </div>

      <div id="loginMsg" class="muted"></div>

      <div class="row" style="margin-top:10px;">
        <button class="btn btn-ghost" id="openNewFileBtn" type="button" style="flex:1;">
          <i class="fa-solid fa-folder-plus"></i> Ù„Ø§ ØªÙ…Ù„Ùƒ Ù…Ù„ÙÙ‹Ø§ØŸ Ø§ÙØªØ­ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯
        </button>
      </div>
    </section>

    <!-- Ø§Ù„Ø­Ø¬Ø² -->
    <section id="bookingSection" class="card" style="display:none;" aria-label="Ø§Ù„Ø­Ø¬Ø²">
      <div class="card-head">
        <span class="chip"><i class="fa-solid fa-calendar-check"></i> Ø§Ù„Ø­Ø¬Ø²</span>
        

        <button id="toggleHours" type="button" class="btn-hours">
          <i class="fa-solid fa-clock"></i> Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„
        </button>
      </div>

      <div class="grid two">
        <div>
          <label for="clinic">Ø§Ø®ØªØ± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©</label>
          <div class="field has-icon">
            <i class="prefix fa-solid fa-hospital"></i>
            <select id="clinic">
  <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©</option>
</select>

          </div>

          <!-- Ù…Ù„Ø§Ø­Ø¸Ø© Ø®Ø§ØµØ© Ù„Ø¹ÙŠØ§Ø¯Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© ÙÙ‚Ø· -->
          <div id="dermNote" class="note" style="display:none; margin-top:10px;"></div>
        </div>

        <div>
          <label for="month"> </label>
          <div class="field has-icon">
            <i class="prefix fa-solid fa-calendar-days"></i>
            <select id="month">
              <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø±</option>
              <option value="1">ÙŠÙ†Ø§ÙŠØ±</option>
<option value="2">ÙØ¨Ø±Ø§ÙŠØ±</option>
<option value="3">Ù…Ø§Ø±Ø³</option>
<option value="4">Ø£Ø¨Ø±ÙŠÙ„</option>
<option value="5">Ù…Ø§ÙŠÙˆ</option>
<option value="6">ÙŠÙˆÙ†ÙŠÙˆ</option>
<option value="7">ÙŠÙˆÙ„ÙŠÙˆ</option>
<option value="8">Ø£ØºØ³Ø·Ø³</option>
<option value="9">Ø³Ø¨ØªÙ…Ø¨Ø±</option>
<option value="10">Ø£ÙƒØªÙˆØ¨Ø±</option>
<option value="11">Ù†ÙˆÙÙ…Ø¨Ø±</option>
<option value="12">Ø¯ÙŠØ³Ù…Ø¨Ø±</option>
            </select>
          </div>

          <button id="fetchBtn" class="btn btn-green" style="margin-top:10px;">
            <i class="fa-solid fa-magnifying-glass"></i> Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯
          </button>
        </div>
      </div>

      <!-- Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© / Ù…Ù„Ø§Ø­Ø¸Ø© -->
      <div id="noteWrap" style="display:none; margin-top:12px;">
        <label for="note">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© / Ù…Ù„Ø§Ø­Ø¸Ø©</label>
        <div class="field">
          <textarea id="note" placeholder="Ø§ÙƒØªØ¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ø£Ùˆ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ù…ÙˆØ¸Ùâ€¦"></textarea>
        </div>
      </div>

      <div style="margin-top:12px;">
        <label for="time">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ‚Øª</label>
        <div class="field has-icon">
          <i class="prefix fa-solid fa-clock"></i>
          <select id="time" disabled>
            <option value="">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¨Ø­Ø« Ø£ÙˆÙ„Ø§Ù‹</option>
          </select>
        </div>

        <button id="bookNowBtn" class="btn btn-gold" style="margin-top:12px;" disabled>
          <i class="fa-solid fa-circle-check"></i> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²
        </button>

        <div id="bkMsg" class="muted"></div>
      </div>
      <div style="margin-top:20px;">
  <button id="logoutBtn" class="btn btn-danger">
    <i class="fa-solid fa-right-from-bracket"></i> ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
  </button>
</div>

    </section>

    <!-- Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ -->
    <section id="hoursSection" class="card" style="display:none;" aria-label="Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„">
      <div class="card-head">
        <span class="chip"><i class="fa-solid fa-clock"></i> Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„</span>
        <button id="toggleBooking" type="button" class="btn-hours">
          <i class="fa-solid fa-calendar-check"></i> Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø­Ø¬Ø²
        </button>
      </div>

      <div style="overflow:auto;">
        <table class="hours-table">
          <thead>
            <tr>
              <th>Ø§Ù„Ù‚Ø³Ù… / Ø§Ù„Ø·Ø¨ÙŠØ¨</th>
              <th>Ø§Ù„Ø£ÙŠØ§Ù…</th>
              <th>Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</th>
              <th>Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ù†Ø§Ù† 1 (Ø¯. Ø¹Ø¨ÙŠØ±)</td>
              <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>9:00 Øµ â€“ 12:00 Ù…</td>
              <td>4:00 Ù… â€“ 9:00 Ù…</td>
            </tr>
            <tr>
  <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø¯ÙƒØªÙˆØ±Ø© Ù‡Ø§Ø¬Ø±</td>
  <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
  <td>
    Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©: 9:00 Øµ â€“ 11:00 Øµ<br>
    Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©: 3:00 Ù… â€“ 9:00 Ù…
  </td>
  <td></td>
</tr>

<tr>
  <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø¯ÙƒØªÙˆØ± Ù…Ø¢Ø¨</td>
  <td>Ø§Ù„Ø®Ù…ÙŠØ³ ÙÙ‚Ø·</td>
  <td>
    Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©: 2:00 Ù… â€“ 10:00 Ù…
  </td>
  <td></td>
</tr>

            <tr>
              <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ù†Ø§Ù† 2 (Ø¯. Ø±ÙŠØ§Ù†)</td>
              <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>8:00 Øµ â€“ 11:00 Øµ</td>
              <td>4:00 Ù… â€“ 9:00 Ù…</td>
            </tr>
            <tr>
              <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ù†Ø§Ù† 3 (Ø¯. Ù…Ø¹Ø§Ø°)</td>
              <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>12:00 Ù… â€“ 8:00 Ù…</td>
              <td>-</td>
            </tr>
            <tr>
              <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ù†Ø§Ù† 4 (Ø¯. Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ)</td>
              <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>2:00 Ù… â€“ 10:00 Ù…</td>
              <td>-</td>
            </tr>
            <tr>
              <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù„Ø¯ÙŠØ© ÙˆØ§Ù„ØªØ¬Ù…ÙŠÙ„ (Ø¯. ÙˆÙ„Ø§Ø¡)</td>
              <td>Ø§Ù„Ø£Ø­Ø¯ - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>-</td>
              <td>3:00 Ù… â€“ 10:00 Ù…</td>
            </tr>
            <tr>
              <td>Ø§Ù„ØªØ´Ù‚ÙŠØ± ÙˆØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© (Ø£Ø®ØµØ§Ø¦ÙŠØ© Ù‡Ø¯Ù‰)</td>
              <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>-</td>
              <td>2:00 Ù… â€“ 10:00 Ù…</td>
            </tr>
            <tr>
              <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø·Ø¨ Ø§Ù„Ø¹Ø§Ù… ÙˆØ§Ù„Ø·ÙˆØ§Ø±Ø¦ (Ø¯. Ù‡Ù†Ø§Ø¯ÙŠ)</td>
              <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>10:00 Øµ â€“ 12:00 Ù…</td>
              <td>4:00 Ù… â€“ 10:00 Ù…</td>
            </tr>
            <tr>
              <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ù†Ø³Ø§Ø¡ ÙˆØ§Ù„ÙˆÙ„Ø§Ø¯Ø© (Ø¯. Ø­Ø³Ù†Ø§Ø¡)</td>
              <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>10:00 Øµ â€“ 12:00 Ù…</td>
              <td>4:00 Ù… â€“ 10:00 Ù…</td>
            </tr>
            <tr>
              <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ù„ÙŠØ²Ø± (Ù†Ø³Ø§Ø¡) 1</td>
              <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>8:00 Øµ â€“ 11:00 Ù…</td>
              <td>-</td>
            </tr>
            <tr>
              <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ù„ÙŠØ²Ø± (Ù†Ø³Ø§Ø¡) 2</td>
              <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>8:00 Øµ â€“ 11:00 Ù…</td>
              <td>-</td>
            </tr>
            <tr>
              <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ù„ÙŠØ²Ø± (Ø±Ø¬Ø§Ù„)</td>
              <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
              <td>9:00 Øµ â€“ 2:00 Ù…</td>
              <td></td>
            </tr>
            <tr>
              <td colspan="4" style="background:rgba(255,246,223,.9);font-weight:900;color:#6b4b00;">
                ÙŠÙˆÙ… Ø§Ù„Ø¬Ù…Ø¹Ø©: Ø·Ø¨ÙŠØ¨ Ø£Ø³Ù†Ø§Ù† Ù…Ù†Ø§ÙˆØ¨ (ØºØ§Ù„Ø¨Ù‹Ø§ Ø¯. Ù…Ø¹Ø§Ø°)ØŒ Ø¹ÙŠØ§Ø¯Ø§Øª Ø§Ù„Ù„ÙŠØ²Ø± Ù…ÙØªÙˆØ­Ø©ØŒ Ø§Ù„ØªØ´Ù‚ÙŠØ± ÙˆØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© (Ø­Ø³Ø¨ Ø§Ù„ØªÙˆÙØ±) Ø§Ù„Ø¯ÙˆØ§Ù… 2:00 Ù… â€“ 10:00 Ù… Ø­Ø³Ø¨ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©.
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Ù…Ø¬Ù…Ø¹ ÙÙŠÙ†ÙƒØ³ Ø§Ù„Ø·Ø¨ÙŠ 2025</footer>

<script>
  // ===== Helpers =====
  const isSaudi05 = (v)=> /^05\d{8}$/.test((v||'').replace(/\D/g,''));
  // ØªÙØ¹ÙŠÙ„ Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (ÙŠØ¯Ø¹Ù… Ø£Ø±Ù‚Ø§Ù… Ø¹Ø±Ø¨ÙŠØ© ÙˆØ¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©)
function updateLoginBtn(){
  const phoneOK = isSaudi05(mobile.value);

  // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¥Ù„Ù‰ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
  const toEn = s => s.replace(/[Ù -Ù©]/g, d => 'Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©'.indexOf(d));

  const idRaw = toEn(identity.value || '');
  const idDigits = idRaw.replace(/\D/g,'');
  const okId = idDigits.length >= 9;

  loginBtn.disabled = !(okId && phoneOK);
}

// ===== Ø¹Ù†Ø§ØµØ± Ø£Ø³Ø§Ø³ÙŠØ© =====
const screenLoader = document.getElementById('screenLoader');

const identity  = document.getElementById('identity');
const mobile    = document.getElementById('mobile');
const loginBtn  = document.getElementById('loginBtn');
const loginMsg  = document.getElementById('loginMsg');
['input','change','keyup'].forEach(ev=>{
  identity.addEventListener(ev, updateLoginBtn);
  mobile.addEventListener(ev, updateLoginBtn);
});

 

  // Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
  const showLoader = (on)=> {
    if(on){ screenLoader.classList.add('show'); document.body.style.pointerEvents='none'; }
    else { screenLoader.classList.remove('show'); document.body.style.pointerEvents='auto'; }
  };

 

  // ÙØªØ­ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯
  document.getElementById('openNewFileBtn').addEventListener('click', ()=>{
    if ((identity.value||'').trim()) localStorage.setItem('auth_identity', (identity.value||'').trim());
    if (isSaudi05(mobile.value))     localStorage.setItem('auth_phone', mobile.value.trim());
    window.location.href = 'new-file.html';
  });

  // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  loginBtn.addEventListener('click', async ()=>{
    loginBtn.disabled = true;

    loginMsg.textContent = 'Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚...';
    const payload = {
      identity: (identity.value||'').trim(),
      phone: (mobile.value||'').trim(),
    };
    showLoader(true);
    try{
      const r = await fetch('/api/login', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      const data = await r.json();

      if(!data.success){
        loginMsg.textContent = data.message || 'Ù„Ø§ ØªÙ…Ù„Ùƒ Ù…Ù„ÙÙ‹Ø§ Ù„Ø¯ÙŠÙ†Ø§. Ø§Ù†Ù‚Ø± (Ø§ÙØªØ­ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯).';
        loginBtn.disabled = false;

        return;
      }

      // ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù
    

      if (data.hasIdentity === false) {
        loginMsg.textContent = 'Ù†Ø­ØªØ§Ø¬ Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ù‡ÙˆÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø¬Ø²...';
        setTimeout(()=>{ window.location.href = 'identity.html'; }, 500);
        return;
      }

      // Ù„Ø¯ÙŠÙ‡ Ù‡ÙˆÙŠØ© â€” Ø£Ø¸Ù‡Ø± Ø§Ù„Ø­Ø¬Ø²
      loginMsg.textContent = '';
      document.getElementById('loginSection').style.display = 'none';
      document.getElementById('bookingSection').style.display = '';
      window.scrollTo({top:0, behavior:'smooth'});
    }catch(e){
      loginMsg.textContent = 'ØªØ¹Ø°Ù‘Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ø­Ø§Ù„ÙŠÙ‹Ø§. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§.';
      loginBtn.disabled = false;

    }finally{
      showLoader(false);
    }
  });

  // ===== Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø­Ø¬Ø² =====
  let isLoadingTimes = false;
  const fetchBtn = document.getElementById('fetchBtn');
  const timeSel  = document.getElementById('time');
  const bookNowBtn = document.getElementById('bookNowBtn');
  const bkMsg = document.getElementById('bkMsg');
  const clinicSel = document.getElementById('clinic');
  const monthSel  = document.getElementById('month');
  async function loadClinicsFromServer(){
  clinicSel.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©</option>`;

  const r = await fetch('/api/clinics');
  const data = await r.json();

  const clinics = (data.clinics || []);
  clinics.forEach(c => {
    const opt = document.createElement('option');
    opt.value = c.imdad_key;   // âœ… Ù‡Ø°Ø§ Ø§Ù„Ù„ÙŠ ÙŠØ±ÙˆØ­ Ù„Ù„Ø³ÙŠØ±ÙØ± ÙÙŠ /api/times Ùˆ /api/book
    opt.textContent = c.label; // âœ… Ù‡Ø°Ø§ Ø§Ù„Ù„ÙŠ ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
    clinicSel.appendChild(opt);
  });
}

  
  // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ù‡Ø± ÙˆØ²Ø± Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ (Ù„Ù… ÙŠØ¹Ø¯Ø§ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†)
monthSel.closest('.field').style.display = 'none';
fetchBtn.style.display = 'none';

// Ù‚ÙŠÙ…Ø© Ø´ÙƒÙ„ÙŠØ© ÙÙ‚Ø· Ù„Ù„ØªÙˆØ§ÙÙ‚
monthSel.value = 'auto';

  document.getElementById('month').closest('.field').style.display = 'none';
  const dermNote  = document.getElementById('dermNote');
  const noteWrap  = document.getElementById('noteWrap');
  const noteInput = document.getElementById('note');

  // >>> Ø¯Ø§Ù„Ø© ØµØºÙŠØ±Ø© Ù„ØªØ®Ø²ÙŠÙ† Ù„Ù‚Ø·Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¬Ø² Ù„ØµÙØ­Ø© success.html
  function snapshotPendingForSuccess(){
    localStorage.setItem('pending_identity', localStorage.getItem('auth_identity') || '');
    localStorage.setItem('pending_phone',    localStorage.getItem('auth_phone')    || '');
    localStorage.setItem('pending_clinic', clinicSel.value);
    localStorage.setItem('pending_clinic_label', clinicSel.selectedOptions[0]?.text || clinicSel.value || '');
    localStorage.setItem('pending_month', monthSel.value);
    localStorage.setItem('pending_time', timeSel.value);
    localStorage.setItem('pending_note', (noteInput.value || '').trim());
  }

  // Ø¯Ø§Ù„Ø© Ù„ØªÙØ±ÙŠØº Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ¥Ø¬Ø¨Ø§Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¹Ø±Ø¶
  function resetTimes(trigger=''){
   timeSel.innerHTML = `<option value="">Ø§Ø®ØªØ± Ø¹ÙŠØ§Ø¯Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª</option>`;
timeSel.disabled = false;   // ğŸ”¥ Ù„Ø§ ØªØ¹Ø·Ù„Ù‡Ø§
bookNowBtn.disabled = true;

    bkMsg.textContent = trigger === 'clinic'
      ? 'ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© â€” Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù…Ù† Ø¬Ø¯ÙŠØ¯.'
      : (trigger === 'month' ? 'ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ù‡Ø± â€” Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù…Ù† Ø¬Ø¯ÙŠØ¯.' : '');
  }

  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø®Ø§ØµØ© Ù„Ø¹ÙŠØ§Ø¯Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© ÙÙ‚Ø· + Ø¥Ø¸Ù‡Ø§Ø± Ø®Ø§Ù†Ø© "Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©/Ù…Ù„Ø§Ø­Ø¸Ø©" Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø¹ÙŠØ§Ø¯Ø©
clinicSel.addEventListener('change', ()=>{
  const v = clinicSel.value || '';
  const isCleaning = v.startsWith('Ø¹ÙŠØ§Ø¯Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø©');
  dermNote.style.display = isCleaning ? 'block' : 'none';
  noteWrap.style.display = v ? 'block' : 'none';

  if (!v) {
    resetTimes('clinic');
    return;
  }

  // ğŸ”¥ Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù…Ø¨Ø§Ø´Ø±Ø©
  fetchBtn.click();
});



  // ØªÙØ±ÙŠØº Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ù‡Ø±
  monthSel.addEventListener('change', ()=> resetTimes('month'));

  fetchBtn.addEventListener('click', async () => {
    const clinic = clinicSel.value;
    const month  = monthSel.value;

    bkMsg.textContent = '';
    timeSel.disabled = false;

    bookNowBtn.disabled = true;
    timeSel.innerHTML = `<option>...Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª...</option>`;

    if (!clinic) {
  timeSel.innerHTML = `<option value="">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©</option>`;
  return;
}

    if (isLoadingTimes) return;
    isLoadingTimes = true;

    fetchBtn.disabled = true;
    clinicSel.disabled = true;
    monthSel.disabled = true;
    showLoader(true);

    try {
      const r = await fetch('/api/times', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ clinic, month })
      });
      const data = await r.json();
      if (data.times && data.times.length) {
        timeSel.innerHTML = data.times.map(t => `<option value="${t.value}">${t.label}</option>`).join('');
        timeSel.disabled = false;
        bookNowBtn.disabled = false;
      } else {
        timeSel.innerHTML = `<option value="">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙˆÙ‚Ø§Øª Ù…ØªØ§Ø­Ø©</option>`;
        bkMsg.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙˆÙ‚Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.';
      }
    } catch {
      timeSel.innerHTML = `<option value="">ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª</option>`;
      bkMsg.textContent = 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹.';
    } finally {
      isLoadingTimes = false;
      fetchBtn.disabled = false;
      clinicSel.disabled = false;
      monthSel.disabled = false;
      showLoader(false);
    }
  });

  // Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø§Ù„Ø¢Ù†
  bookNowBtn.addEventListener('click', async () => {
    const clinic = clinicSel.value;
    const month  = monthSel.value;
    const time   = timeSel.value;
   const identityVal = identity.value.trim();
const phone       = mobile.value.trim();

    const note   = (noteInput.value || '').trim();

   if (!clinic || !time || !identityVal || !phone) {
  bkMsg.textContent = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© ÙˆØ§Ù„ÙˆÙ‚Øª ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.';
  return;
}


    snapshotPendingForSuccess();

    bookNowBtn.disabled = true;
    fetchBtn.disabled = true;
    clinicSel.disabled = true;
    monthSel.disabled = true;
    timeSel.disabled = false;

    showLoader(true);
    bkMsg.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²...';

    try {
      const payload = { identity: identityVal, phone, clinic, month, time, note, key: Date.now().toString() };
      const res = await fetch('/api/book', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      const data = await res.json();
      const msg  = (data && data.msg) ? String(data.msg) : '';

      localStorage.setItem('booking_result_msg', msg);
      window.location.href = 'success.html';
    } catch (e) {
      bkMsg.textContent = 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹.';
      bookNowBtn.disabled = false;
      fetchBtn.disabled = false;
      clinicSel.disabled = false;
      monthSel.disabled = false;
      timeSel.disabled = false;
    } finally {
      showLoader(false);
    }
  });

  // ===== ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø¬Ø² ÙˆØ³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ =====
  const bookingSection = document.getElementById('bookingSection');
  const hoursSection = document.getElementById('hoursSection');
  const toggleHoursBtn = document.getElementById('toggleHours');
  const toggleBookingBtn = document.getElementById('toggleBooking');

  function showHours(){
    bookingSection.style.display = 'none';
    hoursSection.style.display = '';
    window.scrollTo({top:0, behavior:'smooth'});
  }
  function showBooking(){
    hoursSection.style.display = 'none';
    bookingSection.style.display = '';
    window.scrollTo({top:0, behavior:'smooth'});
  }

  toggleHoursBtn.addEventListener('click', showHours);
  toggleBookingBtn.addEventListener('click', showBooking);

// ===============================
// LOGOUT HANDLER
// ===============================
document.getElementById('logoutBtn')?.addEventListener('click', () => {

  // 1ï¸âƒ£ Ù…Ø³Ø­ Ø¬Ù„Ø³Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙ‚Ø·
  localStorage.removeItem('auth_identity');
  localStorage.removeItem('auth_phone');
  localStorage.removeItem('auth_fileId');

  // 2ï¸âƒ£ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  document.getElementById('bookingSection').style.display = 'none';
  document.getElementById('loginSection').style.display = '';

  // 3ï¸âƒ£ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø­Ù‚ÙˆÙ„
  document.getElementById('identity').value = '';
  document.getElementById('mobile').value   = '';
  

  // 4ï¸âƒ£ Ø³ÙƒØ±ÙˆÙ„ Ù„Ù„Ø£Ø¹Ù„Ù‰
  window.scrollTo({ top: 0, behavior: 'smooth' });
});


</script>

</body>
</html>
