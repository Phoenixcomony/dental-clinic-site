<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ | Ù…Ø¬Ù…Ø¹ ÙÙŠÙ†ÙƒØ³ Ø§Ù„Ø·Ø¨ÙŠ</title>
  <meta name="description" content="Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø¨Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ ÙˆØ§Ù„Ø¬ÙˆØ§Ù„ Ù…Ø¹ ØªØ­Ù‚Ù‚ ÙˆØ§ØªØ³Ø§Ø¨ØŒ Ø«Ù… Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ.">
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root{    
      --gold-main:#e2be6d;
      --gold-shadow:0 4px 32px 0 #e2be6d26, 0 1.5px 6px #ffdfa215;
      --gold-light:#fff8e6;
      --gold-gradient:linear-gradient(90deg,#e8ca7c 10%, #fff8e6 100%);
      --green-main:#2e7d32;
      --green-dark:#1b5e20;
      --green-shadow:0 6px 16px rgba(46,125,50,.35);
      --green-grad:linear-gradient(135deg,#2e7d32,#1b5e20);
    }
    body{ font-family:'Cairo', Tahoma, Arial, sans-serif; margin:0; min-height:100vh; display:flex; flex-direction:column; background:#fffdfa; }
    .wrap{ max-width:540px; margin:26px auto; background:#fff; border:1px solid #e8ca7c80; border-radius:18px; box-shadow:var(--gold-shadow); padding:18px; }
    .title{ display:flex; align-items:center; gap:10px; justify-content:center; font-weight:800; color:#a67c0e; margin:6px 0 14px; }
    label{ display:block; font-weight:700; color:#b18836; margin:.5rem 0 .3rem; }
    input, select, textarea{ width:100%; padding:12px 11px; border-radius:14px; border:1.4px solid #e2be6d99; background:#fffdfa; font-size:1rem; }
    textarea{ min-height:88px; resize:vertical; }
    input:focus, select:focus, textarea:focus{ border:1.7px solid #e2be6d; background:#fff9e0; outline:none; }
    .btn{ width:100%; padding:13px 0; border:none; border-radius:16px; font-weight:800; background:var(--gold-gradient); color:#6b4b00; cursor:pointer; box-shadow:0 6px 16px #e2be6d33; transition:.2s ease; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }
    .muted{ color:#7a6d4e; font-size:.95rem; text-align:center; min-height:22px; margin-top:8px; }
    .row{ display:flex; gap:8px; } .row > *{ flex:1; }
    footer{ margin-top:auto; text-align:center; padding:10px; color:#8c6d1c; font-weight:700; background:rgba(255,255,255,0.219); border-top:1.5px solid #eee; letter-spacing:.6px; box-shadow:0 -2px 12px #e2be6d54; }

    /* Ø®Ù„ÙÙŠØ© */
    .blur-bg-appointment{ position: fixed; inset: 0; background: url('images/Ø­Ø¬Ø² Ø§Ù„Ù…ÙˆØ¹Ø¯.png') center/cover no-repeat; filter: blur(16px) brightness(0.97); opacity: 1; z-index: 0; pointer-events: none; }
    body > *:not(.blur-bg-appointment){ position: relative; z-index: 1; }

    /* Ù‡ÙŠØ¯Ø± */
    header{ backdrop-filter: blur(6px); background: rgba(255,255,255,0.7); border-bottom: 1px solid #f1e4c5; box-shadow: 0 6px 24px #e2be6d26; position: sticky; top: 0; z-index: 5; }
    .container.header-flex{ display:flex; justify-content:space-between; align-items:center; max-width:1200px; margin:0 auto; padding:10px 16px; }
    .logo-container{ display:flex; align-items:center; gap:10px; }
    .logo-img{ height:46px; margin-left:9px; }
    header nav ul{ list-style:none; display:flex !important; flex-direction:row !important; align-items:center; gap:18px; margin:0; padding:0; background:transparent; flex-wrap:wrap; justify-content:center; }
    header nav ul li{ display:flex; align-items:center; margin:0; padding:0; }
    header nav ul li a{ color:#181818; text-decoration:none; padding:7px 14px; font-weight:700; border-radius:999px; font-size:1.05em; transition:.25s; background:transparent; display:inline-block; white-space:nowrap; }
    header nav ul li a.active, header nav ul li a:hover{ background-color:#fffbe7; color:#a8861c; box-shadow:0 2px 10px #e2be6d23; }

    /* Ø³ÙˆØ´ÙŠØ§Ù„ */
    .social-icons{ display:flex !important; align-items:center; gap:8px; margin-inline-start:8px; flex-wrap:nowrap; }
    .social-icons .social-icon{ font-size:1.1em; display:inline-flex; align-items:center; justify-content:center; width:32px; height:32px; border-radius:50%; background:#fff3ce; color:#b89023; text-decoration:none; border:1.2px solid #f9e9c8; box-shadow:0 1px 6px #e2be6d26; transition:.2s; }
    .social-icons .social-icon:hover{ background:#fffbe7; color:#84610f; transform: translateY(-1px); }

    /* Ù„ÙˆØ¯Ø± */
    .screen-loader{ position: fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(255,255,255,0.55); backdrop-filter: blur(3px); z-index: 9999; transition: opacity .2s ease; }
    .screen-loader.show{ display:flex; }
    .spinner{ width: 70px; height: 70px; border-radius: 50%; border: 4px solid #e9d9ac; border-top-color: var(--gold-main); animation: spin 0.9s linear infinite; box-shadow: 0 8px 28px #e2be6d55; }
    @keyframes spin { to { transform: rotate(360deg);} }

    /* Ø²Ø± Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ (Ø£Ø®Ø¶Ø±) */
    .btn-hours{ display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:14px; border:none; font-weight:800; cursor:pointer; background: var(--green-grad); color:#fff; box-shadow: var(--green-shadow); animation: breathe 1.8s ease-in-out infinite; }
    .btn-hours i{ font-size:1.05em; }
    @keyframes breathe{ 0%{ transform:scale(1); box-shadow:var(--green-shadow); } 50%{ transform:scale(1.045); box-shadow:0 12px 28px rgba(27,94,32,.55); } 100%{ transform:scale(1); box-shadow:var(--green-shadow); } }

    /* Ø²Ø± Ø²Ø¬Ø§Ø¬ÙŠ */
    .btn-glass{ background:#cb9816; color:#010101; border:1.8px solid #ffffff; border-radius:999px; backdrop-filter:none; box-shadow:0 2px 10px rgba(5, 5, 5, 0.748); transition:transform .15s ease, box-shadow .2s ease, background .2s ease, color .2s ease, border-color .2s ease; }
    .btn-glass:hover{ background:#cb9816; color:#ffffff; border-color:#111111; transform:translateY(-1px); box-shadow:0 8px 20px rgba(0,0,0,.12); }
    .btn-glass:active{ transform:translateY(0); box-shadow:0 2px 8px rgba(0,0,0,.10); }

    /* Ù…Ù„Ø§Ø­Ø¸Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© */
    .clinic-note{ display:none; margin:8px 0 0; color:#7a5d16; background:#fff9e8; border:1px dashed #e8ca7c; border-radius:12px; padding:10px 12px; font-weight:700; text-align:right; }

    /* Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø³Ø§Ø¹Ø§Øª */
    .hours-table{ width:100%; border-collapse:collapse; background:#fff; border-radius:12px; overflow:hidden; }
    .hours-table th, .hours-table td{ border:1px solid #eee2bf; padding:10px; text-align:center; }
    .hours-table th{ background:#2e7d32; color:#fff; }

    /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© */
    .note-wrap{ display:none; margin-top:10px; }
  </style>
</head>
<body>

  <div class="blur-bg-appointment" aria-hidden="true"></div>

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
  <div id="screenLoader" class="screen-loader" aria-live="polite" aria-busy="true">
    <div class="spinner" role="status" aria-label="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„"></div>
  </div>

  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <header>
    <div class="container header-flex">
      <div class="logo-container">
        <img src="images/logo phoenix-Photoroom.png" alt="Ø´Ø¹Ø§Ø± Ù…Ø¬Ù…Ø¹ ÙÙŠÙ†ÙƒØ³ Ø§Ù„Ø·Ø¨ÙŠ" class="logo-img" loading="eager" decoding="async">
      </div>
      <nav aria-label="Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ">
        <ul>
          <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
          <li><a href="about.html">Ù…Ù† Ù†Ø­Ù†</a></li>
          <li><a href="services.html">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a></li>
          <li><a href="appointment.html" class="active" aria-current="page">Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯</a></li>
          <li><a href="contact.html">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a></li>
          <li>
            <div class="social-icons">
              <a href="https://wa.me/966531422555" target="_blank" rel="noopener" title="ÙˆØ§ØªØ³Ø§Ø¨" class="social-icon" aria-label="ÙˆØ§ØªØ³Ø§Ø¨"><i class="fab fa-whatsapp"></i></a>
              <a href="https://www.instagram.com/phoenix.shq/" target="_blank" rel="noopener" title="Ø¥Ù†Ø³ØªÙ‚Ø±Ø§Ù…" class="social-icon" aria-label="Ø¥Ù†Ø³ØªÙ‚Ø±Ø§Ù…"><i class="fab fa-instagram"></i></a>
              <a href="https://www.snapchat.com/add/phoenix.shq?share_id=VOXDQhmXrWw&locale=ar-AE" target="_blank" rel="noopener" title="Ø³Ù†Ø§Ø¨ Ø´Ø§Øª" class="social-icon" aria-label="Ø³Ù†Ø§Ø¨ Ø´Ø§Øª"><i class="fab fa-snapchat-ghost"></i></a>
            </div>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
  <section id="loginSection" class="wrap">
    <div class="title"><i class="fa fa-user-check"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>

    <label for="fullname">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ</label>
    <input id="fullname" type="text" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯ Ù…ØµØ·ÙÙ‰" autocomplete="name">

    <label for="mobile">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
    <input id="mobile" type="text" placeholder="05xxxxxxxx" autocomplete="tel" inputmode="numeric" maxlength="10">

    <!-- ØªÙ†Ø¨ÙŠÙ‡ Ø®Ø§Øµ -->
    <p style="color:#b00020; font-weight:bold; margin:12px 0; text-align:center;">
      ğŸ””ØªÙ†Ø¨ÙŠÙ‡: Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ù„ÙŠØ²Ø± Ù…ØªØ§Ø­Ø© ÙÙ‚Ø· Ù„Ù„Ø­Ø¬Ø² ÙÙŠ Ø§Ù„Ù…Ø¬Ù…Ø¹.
    </p>

    <!-- Ø®Ø§Ù†Ø© Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ (Ù…Ø®ÙÙŠØ© Ø­ØªÙ‰ ÙŠØ¶ØºØ· Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯) -->
    <div id="otpGroup" style="display:none;">
      <label for="otp">Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ (ÙˆØ§ØªØ³Ø§Ø¨)</label>
      <input id="otp" type="text" placeholder="6 Ø£Ø±Ù‚Ø§Ù…" inputmode="numeric" maxlength="6">
      <div class="row" style="margin-top:8px;">
        <button id="resendOtp" class="btn btn-glass" type="button" style="display:none;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</button>
      </div>
      <div id="otpTimer" class="muted"></div>
    </div>

    <div class="row" style="margin-top:8px;">
      <!-- ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ -->
      <button id="sendOtp" class="btn btn-glass" type="button" style="display:none;">Ø¥Ø±Ø³Ø§Ù„ ÙƒÙˆØ¯ ÙˆØ§ØªØ³Ø§Ø¨</button>
      <button id="loginBtn" class="btn btn-glass" type="button" disabled>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="loginMsg" class="muted"></div>

    <p class="muted" style="margin-top:10px;">
      Ù„Ø§ ØªÙ…Ù„Ùƒ Ù…Ù„ÙÙ‹Ø§ØŸ
      <button class="btn btn-glass" id="openNewFileBtn" type="button" style="padding:9px 12px;width:auto;">Ø§ÙØªØ­ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯</button>
    </p>
  </section>


  <!-- Ø§Ù„Ø­Ø¬Ø² -->
  <section id="bookingSection" class="wrap" style="display:none;">
    <div class="title"><i class="fa-solid fa-calendar-check"></i> Ø§Ù„Ø­Ø¬Ø²</div>

    <!-- Ø²Ø±: Ø¹Ø±Ø¶ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ (Ø£Ø®Ø¶Ø±) -->
    <div style="display:flex; justify-content:center; margin:6px 0 12px;">
      <button id="toggleHours" type="button" class="btn-hours">
        <i class="fa-solid fa-clock"></i> Ø¹Ø±Ø¶ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„
      </button>
    </div>

    <label for="clinic">Ø§Ø®ØªØ± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©</label>
    <select id="clinic">
      <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ø³Ù†Ø§Ù† 5**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø§ÙˆÙ„Ù‰">Ø¹ÙŠØ§Ø¯Ø© Ø§Ø³Ù†Ø§Ù† 5 Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ø³Ù†Ø§Ù† 5**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©">Ø¹ÙŠØ§Ø¯Ø© Ø§Ø³Ù†Ø§Ù† 5 Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 1**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø§ÙˆÙ„Ù‰">Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 1 Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 1**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©">Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 1 Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 2**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø§ÙˆÙ„Ù‰">Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 2 Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 2**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©">Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 2 Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 3**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø§ÙˆÙ„Ù‰">Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 3 Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 3**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©">Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 3 Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 4**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø§ÙˆÙ„Ù‰">Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 4 Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 4**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©">Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø³Ù†Ø§Ù† 4 Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù„Ø¯ÙŠØ© ÙˆØ§Ù„ØªØ¬Ù…ÙŠÙ„**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø§ÙˆÙ„Ù‰">Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù„Ø¯ÙŠØ© ÙˆØ§Ù„ØªØ¬Ù…ÙŠÙ„ Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù„Ø¯ÙŠØ© ÙˆØ§Ù„ØªØ¬Ù…ÙŠÙ„**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©">Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù„Ø¯ÙŠØ© ÙˆØ§Ù„ØªØ¬Ù…ÙŠÙ„ Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</option>
      <option value="Ø¹ÙŠØ§Ø¯Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø©**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©">Ø¹ÙŠØ§Ø¯Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</option>
      <option value="Ø§Ù„Ù†Ø³Ø§Ø¡ Ùˆ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø§ÙˆÙ„Ù‰">Ø§Ù„Ù†Ø³Ø§Ø¡ Ùˆ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</option>
      <option value="Ø§Ù„Ù†Ø³Ø§Ø¡ Ùˆ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©**Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©">Ø§Ù„Ù†Ø³Ø§Ø¡ Ùˆ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</option>
    </select>

    <!-- Ù…Ù„Ø§Ø­Ø¸Ø© Ø®Ø§ØµØ© Ù„Ø¹ÙŠØ§Ø¯Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© ÙÙ‚Ø· -->
    <div id="dermNote" class="clinic-note">
      ØªØªØ¶Ù…Ù† Ø§Ù„Ø®Ø¯Ù…Ø© ØªÙ‚Ø´ÙŠØ± ÙˆØ¬Ù‡ Ù†ØµÙ Ø³Ø§Ø¹Ø© + ØªÙ‚Ø´ÙŠØ± Ø­ÙˆØ§Ø¬Ø¨ Ù†ØµÙ Ø³Ø§Ø¹Ø© + ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© Ù†ØµÙ Ø³Ø§Ø¹Ø© â€” Ø§Ù„Ù…Ø¯Ø© Ø³Ø§Ø¹Ø©
    </div>

    <!-- Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© / Ù…Ù„Ø§Ø­Ø¸Ø© (Ù„Ø§ ØªØ¸Ù‡Ø± Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©) -->
    <div id="noteWrap" class="note-wrap">
      <label for="note">Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© / Ù…Ù„Ø§Ø­Ø¸Ø©</label>
      <textarea id="note" placeholder="Ø§ÙƒØªØ¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ø£Ùˆ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ù…ÙˆØ¸Ùâ€¦"></textarea>
    </div>
    
    <label for="month" style="margin-top:10px;">Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø±</label>
    <select id="month">
      <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø±</option>
    
      <option value="9">Ø³Ø¨ØªÙ…Ø¨Ø±</option>
      <option value="10">Ø£ÙƒØªÙˆØ¨Ø±</option>
      <option value="11">Ù†ÙˆÙÙ…Ø¨Ø±</option>
      <option value="12">Ø¯ÙŠØ³Ù…Ø¨Ø±</option>
    </select>

    <button id="fetchBtn" class="btn btn-glass" style="margin-top:10px;">Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯</button>

    <label for="time" style="margin-top:14px;">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ‚Øª</label>
    <select id="time" disabled>
      <option value="">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¨Ø­Ø« Ø£ÙˆÙ„Ø§Ù‹</option>
    </select>

    <!-- ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²" ÙˆØ¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù€ confirm.html -->
    <button id="bookNowBtn" class="btn btn-glass" style="margin-top:12px;" disabled>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</button>

    <div id="bkMsg" class="muted"></div>
  </section>

  <!-- Ù‚Ø³Ù… Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ -->
  <section id="hoursSection" class="wrap" style="display:none;">
    <div class="title"><i class="fa-solid fa-clock"></i> Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„</div>

    <div style="display:flex; justify-content:center; margin:6px 0 12px;">
      <button id="toggleBooking" type="button" class="btn-hours">
        <i class="fa-solid fa-calendar-check"></i> Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø¬Ø²
      </button>
    </div>

    <div class="hours-table-wrap">
      <table class="hours-table">
        <thead>
          <tr>
            <th>Ø§Ù„Ù‚Ø³Ù… / Ø§Ù„Ø·Ø¨ÙŠØ¨</th>
            <th>Ø§Ù„Ø£ÙŠØ§Ù…</th>
            <th>Ø§Ù„ÙØªØ±Ø© Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</th>
            <th>Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ù†Ø§Ù† 1 (Ø¯. Ø¹Ø¨ÙŠØ±)</td>
            <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>9:00 Øµ â€“ 12:00 Ù…</td>
            <td>4:00 Ù… â€“ 9:00 Ù…</td>
          </tr>
          <tr>
            <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ù†Ø§Ù† 2 (Ø¯. Ø±ÙŠØ§Ù†)</td>
            <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>8:00 Øµ â€“ 11:00 Øµ</td>
            <td>4:00 Ù… â€“ 9:00 Ù…</td>
          </tr>
          <tr>
            <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ù†Ø§Ù† 3 (Ø¯. Ù…Ø¹Ø§Ø°)</td>
            <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>12:00 Ù… â€“ 8:00 Ù…</td>
            <td>-</td>
          </tr>
          <tr>
            <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ù†Ø§Ù† 4 (Ø¯. Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ)</td>
            <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>2:00 Ù… â€“ 10:00 Ù…</td>
            <td>-</td>
          </tr>
          <tr>
            <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø¬Ù„Ø¯ÙŠØ© ÙˆØ§Ù„ØªØ¬Ù…ÙŠÙ„ (Ø¯. ÙˆÙ„Ø§Ø¡)</td>
            <td>Ø§Ù„Ø£Ø­Ø¯ - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>-</td>
            <td>3:30 Ù… â€“ 10:30 Ù…</td>
          </tr>
          <tr>
            <td>Ø§Ù„ØªØ´Ù‚ÙŠØ± ÙˆØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© (Ø£Ø®ØµØ§Ø¦ÙŠØ© Ù‡Ø¯Ù‰)</td>
            <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>-</td>
            <td>2:00 Ù… â€“ 10:00 Ù…</td>
          </tr>
          <tr>
            <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ø·Ø¨ Ø§Ù„Ø¹Ø§Ù… ÙˆØ§Ù„Ø·ÙˆØ§Ø±Ø¦ (Ø¯. Ù‡Ù†Ø§Ø¯ÙŠ)</td>
            <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>10:00 Øµ â€“ 12:00 Ù…</td>
            <td>4:00 Ù… â€“ 10:00 Ù…</td>
          </tr>
          <tr>
            <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ù†Ø³Ø§Ø¡ ÙˆØ§Ù„ÙˆÙ„Ø§Ø¯Ø© (Ø¯. Ø­Ø³Ù†Ø§Ø¡)</td>
            <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>10:00 Øµ â€“ 12:00 Ù…</td>
            <td>4:00 Ù… â€“ 10:00 Ù…</td>
          </tr>
          <tr>
            <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ù„ÙŠØ²Ø± (Ù†Ø³Ø§Ø¡) 1</td>
            <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>8:00 Øµ â€“ 11:00 Ù…</td>
            <td>-</td>
          </tr>
          <tr>
            <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ù„ÙŠØ²Ø± (Ù†Ø³Ø§Ø¡) 2</td>
            <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>8:00 Øµ â€“ 11:00 Ù…</td>
            <td>-</td>
          </tr>
          <tr>
            <td>Ø¹ÙŠØ§Ø¯Ø© Ø§Ù„Ù„ÙŠØ²Ø± (Ø±Ø¬Ø§Ù„)</td>
            <td>Ø§Ù„Ø³Ø¨Øª - Ø§Ù„Ø®Ù…ÙŠØ³</td>
            <td>9:00 Øµ â€“ 2:00 Ù…</td>
            <td></td>
          </tr>
          <tr>
            <td colspan="4" style="background:#fffbe9;font-weight:bold;color:#bb7d0a;">
              ÙŠÙˆÙ… Ø§Ù„Ø¬Ù…Ø¹Ø©: Ø·Ø¨ÙŠØ¨ Ø£Ø³Ù†Ø§Ù† Ù…Ù†Ø§ÙˆØ¨ (ØºØ§Ù„Ø¨Ù‹Ø§ Ø¯. Ù…Ø¹Ø§Ø°)ØŒ Ø¹ÙŠØ§Ø¯Ø§Øª Ø§Ù„Ù„ÙŠØ²Ø± Ù…ÙØªÙˆØ­Ø©ØŒ Ø§Ù„ØªØ´Ù‚ÙŠØ± ÙˆØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© (Ø­Ø³Ø¨ Ø§Ù„ØªÙˆÙØ±) Ø§Ù„Ø¯ÙˆØ§Ù… 2:00 Ù… â€“ 10:00 Ù… Ø­Ø³Ø¨ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <footer>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Ù…Ø¬Ù…Ø¹ ÙÙŠÙ†ÙƒØ³ Ø§Ù„Ø·Ø¨ÙŠ 2025</footer>

<script>
  // ===== Helpers =====
  const isTriple = (v)=> (v||'').trim().split(/\s+/).filter(Boolean).length===3;
  const isSaudi05 = (v)=> /^05\d{8}$/.test((v||'').replace(/\D/g,''));

  // ===== Ø¹Ù†Ø§ØµØ± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ =====
  const sendOtpBtn = document.getElementById('sendOtp');
  const resendOtpBtn = document.getElementById('resendOtp');
  const loginBtn = document.getElementById('loginBtn');
  const loginMsg = document.getElementById('loginMsg');
  const fullname = document.getElementById('fullname');
  const mobile = document.getElementById('mobile');
  const otpInput = document.getElementById('otp');
  const otpGroup = document.getElementById('otpGroup');
  const otpTimerEl = document.getElementById('otpTimer');
  const screenLoader = document.getElementById('screenLoader');

  // Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
  const showLoader = (on)=> {
    if(on){ screenLoader.classList.add('show'); document.body.style.pointerEvents='none'; }
    else { screenLoader.classList.remove('show'); document.body.style.pointerEvents='auto'; }
  };

  // OTP 60s cooldown (UI ÙÙ‚Ø·Ø› Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„Ø¯ÙŠÙ‡ Throttle Ø£ÙŠØ¶Ù‹Ø§)
  let otpCooldown = 0, otpTimer = null;
  function formatSecs(s){ return s + 'Ø«'; }

  function updateLoginBtn(){
    const phoneOK = isSaudi05(mobile.value);
    // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù…Ø¬Ø±Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (Ø­ØªÙ‰ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø§Ø³Ù…)ØŒ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø®Ø§Ù†Ø© Ø§Ù„ÙƒÙˆØ¯ Ù…Ø®ÙÙŠØ©
    sendOtpBtn.style.display = phoneOK && otpGroup.style.display==='none' ? '' : 'none';

    const ok = isTriple(fullname.value) && phoneOK && /^\d{6}$/.test((otpInput.value||'').trim());
    loginBtn.disabled = !ok;
    if (!ok) loginMsg.textContent = 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠØŒ Ø±Ù‚Ù… 05xxxxxxxxØŒ ÙˆÙƒÙˆØ¯ 6 Ø£Ø±Ù‚Ø§Ù….';
    else loginMsg.textContent = '';
  }
  ['input','change','keyup'].forEach(ev=>{
    fullname.addEventListener(ev, updateLoginBtn);
    mobile.addEventListener(ev, updateLoginBtn);
    otpInput.addEventListener(ev, updateLoginBtn);
  });
  updateLoginBtn();

  function startOtpTimer(startFrom=60){
    otpCooldown = startFrom;
    resendOtpBtn.style.display = 'none';
    otpTimerEl.textContent = 'Ø³ÙŠØµÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø®Ù„Ø§Ù„ Ù„Ø­Ø¸Ø§Øª â€” ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø¹Ø¯ ' + formatSecs(otpCooldown);
    otpTimer && clearInterval(otpTimer);
    otpTimer = setInterval(()=>{
      otpCooldown--;
      if(otpCooldown<=0){
        clearInterval(otpTimer); otpTimer=null;
        otpTimerEl.textContent = 'Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª. ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.';
        resendOtpBtn.style.display = '';
        resendOtpBtn.disabled = false;
      }else{
        otpTimerEl.textContent = 'ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø¹Ø¯ ' + formatSecs(otpCooldown);
      }
    },1000);
  }

  async function sendOtp(phone){
    loginMsg.textContent = 'Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯...';
    showLoader(true);
    try{
      const r = await fetch('/send-otp', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ phone })
      });
      const data = await r.json();
      if (data.success) {
        loginMsg.textContent = 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨';
        startOtpTimer(60);
        return true;
      } else {
        if (data.retryAfter){
          loginMsg.textContent = 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ' + data.retryAfter + 'Ø« Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.';
          startOtpTimer(Number(data.retryAfter)||60);
        } else {
          loginMsg.textContent = data.message || 'ØªØ¹Ø°Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„';
        }
        return false;
      }
    }catch{
      loginMsg.textContent = 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';
      return false;
    }finally{
      showLoader(false);
    }
  }

  // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¥Ø±Ø³Ø§Ù„ ÙƒÙˆØ¯ ÙˆØ§ØªØ³Ø§Ø¨"
  sendOtpBtn.addEventListener('click', async ()=>{
    const phone = mobile.value.trim();
    if(!isSaudi05(phone)){ loginMsg.textContent = 'Ø§Ù„Ø±Ù‚Ù… Ø¨ØµÙŠØºØ© 05xxxxxxxx'; return; }

    // Ø¥Ø¸Ù‡Ø§Ø± Ø®Ø§Ù†Ø© Ø§Ù„ÙƒÙˆØ¯ ÙˆØ¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
    sendOtpBtn.style.display = 'none';
    otpGroup.style.display = '';
    otpInput.value = '';
    updateLoginBtn();

    await sendOtp(phone);
  });

  // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
  resendOtpBtn.addEventListener('click', async ()=>{
    const phone = mobile.value.trim();
    if(!isSaudi05(phone)) return;
    resendOtpBtn.disabled = true;
    const ok = await sendOtp(phone);
    if(!ok) resendOtpBtn.disabled = false;
  });

  // ÙØªØ­ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯
  document.getElementById('openNewFileBtn').addEventListener('click', ()=>{
    if (isTriple(fullname.value)) localStorage.setItem('auth_name', fullname.value.trim());
    if (isSaudi05(mobile.value))  localStorage.setItem('auth_phone', mobile.value.trim());
    window.location.href = 'new-file.html';
  });

  // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  loginBtn.addEventListener('click', async ()=>{
    loginBtn.disabled = true; sendOtpBtn.disabled = true; resendOtpBtn.disabled = true;
    loginMsg.textContent = 'Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚...';
    const payload = {
      name: fullname.value.trim(),
      phone: mobile.value.trim(),
      otp: (otpInput.value||'').trim()
    };
    showLoader(true);
    try{
      const r = await fetch('/api/login', {
        method:'POST', headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      const data = await r.json();

      if(!data.success){
        loginMsg.textContent = data.message || 'Ù„Ø§ ØªÙ…Ù„Ùƒ Ù…Ù„ÙÙ‹Ø§ Ù„Ø¯ÙŠÙ†Ø§. Ø§Ù†Ù‚Ø± (Ø§ÙØªØ­ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯).';
        loginBtn.disabled = false; sendOtpBtn.disabled = false; resendOtpBtn.disabled = false;
        return;
      }

      // ÙŠÙˆØ¬Ø¯ Ù…Ù„Ù
      localStorage.setItem('auth_name', data.fullName || payload.name);
      localStorage.setItem('auth_phone', payload.phone);
      localStorage.setItem('auth_fileId', data.fileId || '');

      if (data.hasIdentity === false) {
        loginMsg.textContent = 'Ù†Ø­ØªØ§Ø¬ Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ù‡ÙˆÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø¬Ø²...';
        setTimeout(()=>{ window.location.href = 'identity.html'; }, 500);
        return;
      }

      // Ù„Ø¯ÙŠÙ‡ Ù‡ÙˆÙŠØ© â€” Ø£Ø¸Ù‡Ø± Ø§Ù„Ø­Ø¬Ø²
      loginMsg.textContent = '';
      document.getElementById('loginSection').style.display = 'none';
      document.getElementById('bookingSection').style.display = '';
      window.scrollTo({top:0, behavior:'smooth'});
    }catch(e){
      loginMsg.textContent = 'ØªØ¹Ø°Ù‘Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ø­Ø§Ù„ÙŠÙ‹Ø§. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§.';
      loginBtn.disabled = false; sendOtpBtn.disabled = false; resendOtpBtn.disabled = false;
    }finally{
      showLoader(false);
    }
  });

  // ===== Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø­Ø¬Ø² =====
  const fetchBtn = document.getElementById('fetchBtn');
  const timeSel  = document.getElementById('time');
  const bookNowBtn = document.getElementById('bookNowBtn');
  const bkMsg = document.getElementById('bkMsg');
  const clinicSel = document.getElementById('clinic');
  const monthSel  = document.getElementById('month');
  const dermNote  = document.getElementById('dermNote');
  const noteWrap  = document.getElementById('noteWrap');
  const noteInput = document.getElementById('note');

  // Ø¯Ø§Ù„Ø© Ù„ØªÙØ±ÙŠØº Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ¥Ø¬Ø¨Ø§Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¹Ø±Ø¶
  function resetTimes(trigger=''){
    timeSel.innerHTML = `<option value="">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯" Ø¨Ø¹Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±</option>`;
    timeSel.disabled = true;
    bookNowBtn.disabled = true;
    bkMsg.textContent = trigger === 'clinic'
      ? 'ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© â€” Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù…Ù† Ø¬Ø¯ÙŠØ¯.'
      : (trigger === 'month' ? 'ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ù‡Ø± â€” Ø§Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù…Ù† Ø¬Ø¯ÙŠØ¯.' : '');
  }

  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø®Ø§ØµØ© Ù„Ø¹ÙŠØ§Ø¯Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© ÙÙ‚Ø· + Ø¥Ø¸Ù‡Ø§Ø± Ø®Ø§Ù†Ø© "Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©/Ù…Ù„Ø§Ø­Ø¸Ø©" Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ø¹ÙŠØ§Ø¯Ø©
  clinicSel.addEventListener('change', ()=>{
    const v = clinicSel.value || '';
    const isCleaning = v.startsWith('Ø¹ÙŠØ§Ø¯Ø© ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø©'); // ÙÙ‚Ø· ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø©
    dermNote.style.display = isCleaning ? 'block' : 'none';
    noteWrap.style.display = v ? 'block' : 'none';
    // ØªÙØ±ÙŠØº Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©
    resetTimes('clinic');
  });

  // ØªÙØ±ÙŠØº Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø´Ù‡Ø±
  monthSel.addEventListener('change', ()=> resetTimes('month'));

  fetchBtn.addEventListener('click', async () => {
    const clinic = clinicSel.value;
    const month  = monthSel.value;

    bkMsg.textContent = '';
    timeSel.disabled = true;
    bookNowBtn.disabled = true;
    timeSel.innerHTML = `<option>...Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª...</option>`;

    if (!clinic || !month) {
      timeSel.innerHTML = `<option value="">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ø´Ù‡Ø±</option>`;
      return;
    }

    // Ù‚ÙÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ + Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø±Ø§Øª + Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù„ÙˆØ¯Ø±
    fetchBtn.disabled = true;
    clinicSel.disabled = true;
    monthSel.disabled = true;
    showLoader(true);

    try {
      const r = await fetch('/api/times', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ clinic, month })
      });
      const data = await r.json();
      if (data.times && data.times.length) {
        timeSel.innerHTML = data.times.map(t => `<option value="${t.value}">${t.label}</option>`).join('');
        timeSel.disabled = false;
        bookNowBtn.disabled = false;
      } else {
        timeSel.innerHTML = `<option value="">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙˆÙ‚Ø§Øª Ù…ØªØ§Ø­Ø©</option>`;
        bkMsg.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙˆÙ‚Ø§Øª Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.';
      }
    } catch {
      timeSel.innerHTML = `<option value="">ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª</option>`;
      bkMsg.textContent = 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª. Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹.';
    } finally {
      // ÙØªØ­ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ù† Ø¬Ø¯ÙŠØ¯ Ø¨Ø¹Ø¯ Ø¸Ù‡ÙˆØ± Ø§Ù„Ù†ØªÙŠØ¬Ø©
      fetchBtn.disabled = false;
      clinicSel.disabled = false;
      monthSel.disabled = false;
      showLoader(false);
    }
  });

  // ğŸ”„ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© â†’ success.html Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­
  async function bookNow(){
    const name   = localStorage.getItem('auth_name')  || '';
    const phone  = localStorage.getItem('auth_phone') || '';
    const clinic = clinicSel.value;
    const month  = monthSel.value;
    const time   = timeSel.value;
    const note   = (noteInput.value || '').trim();

    if(!name || !phone || !clinic || !month || !time){
      bkMsg.textContent = 'Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø¬Ø².';
      return;
    }

    bookNowBtn.disabled = true;
    bookNowBtn.textContent = '...Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø¬Ø²';
    showLoader(true);
    bkMsg.textContent = '';

    try{
      const res = await fetch('/api/book', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ name, phone, clinic, month, time, note, key: Date.now().toString() })
      });
      const data = await res.json();
      const msg = (data && data.msg) ? String(data.msg) : 'ÙØ´Ù„ Ø§Ù„Ø­Ø¬Ø²';
      localStorage.setItem('booking_result_msg', msg);

      if(/^âœ…/.test(msg)){
        window.location.href = 'success.html';
      }else{
        bkMsg.textContent = msg;
        bookNowBtn.disabled = false;
        bookNowBtn.textContent = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²';
      }
    }catch(e){
      bkMsg.textContent = 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù….';
      bookNowBtn.disabled = false;
      bookNowBtn.textContent = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²';
    }finally{
      showLoader(false);
    }
  }

  bookNowBtn.addEventListener('click', bookNow);

  // ===== ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø¬Ø² ÙˆØ³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ =====
  const bookingSection = document.getElementById('bookingSection');
  const hoursSection = document.getElementById('hoursSection');
  const toggleHoursBtn = document.getElementById('toggleHours');
  const toggleBookingBtn = document.getElementById('toggleBooking');

  function showHours(){
    bookingSection.style.display = 'none';
    hoursSection.style.display = '';
    window.scrollTo({top:0, behavior:'smooth'});
  }
  function showBooking(){
    hoursSection.style.display = 'none';
    bookingSection.style.display = '';
    window.scrollTo({top:0, behavior:'smooth'});
  }

  toggleHoursBtn.addEventListener('click', showHours);
  toggleBookingBtn.addEventListener('click', showBooking);
</script>
</body>
</html>
